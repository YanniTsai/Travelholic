{"version":3,"file":"js/519.6fc101b5.js","mappings":"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","sources":["webpack://travelholic/./src/views/front/Cart.vue","webpack://travelholic/./src/components/front/RemoveItemModal.vue","webpack://travelholic/./src/components/front/RemoveItemModal.vue?b608","webpack://travelholic/./src/views/front/Cart.vue?9b7e"],"sourcesContent":["<template>\n    <Loading :active=\"isLoading\" style=\"z-index: 9999\"></Loading>\n    <div class=\"container\">\n        <h3 class=\"m-3\">購物車</h3>\n        <div class=\"d-flex flex-column align-items-center\" v-if=\"cartlength === 0\">\n            <div>購物車目前沒有商品！</div>\n            <button class=\"btn yellow-btn\">\n                <router-link to=\"/products\" class=\"text-dark text-decoration-none\">探索行程</router-link>\n            </button>\n        </div>\n        <div class=\"row\" v-else>\n            <div class=\"col-md-7 cart-list\">\n                <div class=\"mb-3\">\n                    <div class=\"cart-item p-3 m-3\" v-for=\"item in cart.carts\" :key=\"item.id\">\n                        <div class=\"row\">\n                            <img :src=\"item.product.imageUrl\" :alt=\"item.product.title\" class=\"col-md-3\">\n                            <div class=\"col-md-6\">\n                                <router-link :to=\"`/products/${item.product.id}`\" class=\"text-muted text-decoration-none\">\n                                    <div class=\"mb-2\">{{ item.product.title }}</div>\n                                    <div class=\"fw-light mb-2\">{{ item.product.description }}</div>\n                                    <div>$ {{ item.product.price }}</div>\n                                </router-link>\n                            </div>\n                            <div class=\"col-md-3 d-flex align-items-center\">\n                                <div class=\"input-group\">\n                                    <input type=\"number\" min=\"1\" class=\"form-control\" v-model.number=\"item.qty\" @change=\"updateCart(item)\">\n                                    <span class=\"input-group-text bg-white border-0\">人</span>\n                                </div>\n                            </div>\n                        </div>\n                        <hr>\n                        <div class=\"d-flex justify-content-between align-items-center\">\n                            <button class=\"btn\" @click.prevent=\"openRemoveModal(item)\">\n                                <i class=\"bi bi-trash3\"></i>\n                            </button>\n                            <div class=\"fw-bold\">$ {{ $filters.currency(item.total) }}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-5\">\n                <div class=\"mt-3 ms-3 mb-3 pt-3\">\n                    <div class=\"mb-3\">套用優惠</div>\n                    <div class=\"input-group mb-1\">\n                        <input type=\"text\" class=\"form-control\" placeholder=\"輸入優惠碼\" aria-label=\"coupon_code\" aria-describedby=\"usecoupon\" v-model=\"coupon_code\">\n                        <button class=\"btn yellow-btn border\" type=\"button\" id=\"usecoupon\" @click.prevent=\"addCoupon\">使用</button>\n                    </div>\n                    <div class=\"text-success ms-3\" v-if=\"discont\">優惠碼：{{ coupon_code }}&ensp;<i class=\"bi bi-check2-circle\"></i></div>\n                </div>\n                <div class=\"d-flex justify-content-end mb-3\">\n                    <div>\n                        <div class=\"mb-2\">{{ cartlength }} 件商品 </div>\n                        <div class=\"d-flex align-items-center\" :class=\"{'text-secondary': discont}\">\n                            <span>總計：</span>\n                            <span class=\"fw-bold\" :class=\"{'text-decoration-line-through': discont}\">{{ $filters.currency(cart.total) }} 元</span>\n                        </div>\n                        <div v-if=\"discont\">\n                            <span class=\"orange-price\">優惠價： {{ $filters.currency(cart.final_total) }} 元</span>\n                        </div>\n                        <button class=\"btn orange-btn w-100 mt-3\">\n                          <router-link to=\"/order\" class=\"text-decoration-none text-dark\">\n                            結帳去\n                            <i class=\"bi bi-arrow-right\"></i>\n                          </router-link>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <RemoveItemModal ref=\"removeItemModal\" :cartItem=\"tempItem\" @remove-item=\"removeItem\"></RemoveItemModal>\n</template>\n\n<script>\nimport RemoveItemModal from '@/components/front/RemoveItemModal.vue'\n\nexport default {\n  data () {\n    return {\n      cart: {},\n      cartlength: 0,\n      tempItem: {},\n      coupon_code: '',\n      discont: false,\n      isLoading: false\n    }\n  },\n  components: {\n    RemoveItemModal\n  },\n  watch: {\n    cart () {\n      this.cartlength = this.cart.carts.length\n    }\n  },\n  methods: {\n    getCart () {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n\n      this.$http.get(api).then((res) => {\n        this.isLoading = false\n        console.log(res.data)\n\n        this.cart = res.data.data\n      })\n    },\n    updateCart (item) {\n      this.isLoading = true\n      const cart = {\n        product_id: item.id,\n        qty: item.qty\n      }\n\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\n\n      this.$http.put(api, { data: cart }).then((res) => {\n        this.isLoading = false\n        console.log(res.data)\n\n        this.getCart()\n      })\n    },\n    openRemoveModal (item) {\n      this.tempItem = item\n\n      this.$refs.removeItemModal.showModal()\n    },\n    removeItem () {\n      this.isLoading = true\n      console.log(this.tempItem)\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${this.tempItem.id}`\n\n      this.$http.delete(api).then((res) => {\n        this.isLoading = false\n        console.log(res.data)\n\n        this.$refs.removeItemModal.hideModal()\n        this.getCart()\n      })\n    },\n    addCoupon () {\n      const coupon = {\n        code: this.coupon_code\n      }\n\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`\n\n      this.$http.post(api, { data: coupon }).then((res) => {\n        if (res.data.success) {\n          console.log(res.data)\n          this.discont = true\n        }\n\n        this.getCart()\n      })\n    }\n  },\n  created () {\n    this.getCart()\n  }\n}\n</script>\n","<template>\n  <div class=\"modal\" tabindex=\"-1\" ref=\"modal\">\n    <div class=\"modal-dialog modal-dialog-centered\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\">刪除行程</h5>\n        </div>\n        <div class=\"modal-body\">\n          <p>確定要刪除 {{ cartItem.title }} 嗎？</p>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n          <button type=\"button\" class=\"btn btn-danger\" @click.prevent=\"$emit('remove-item')\">刪除</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal'\n\nexport default {\n  props: {\n    cartItem: {\n      type: Object\n    }\n  },\n  data () {\n    return {\n      modal: {}\n    }\n  },\n  methods: {\n    showModal () {\n      this.modal.show()\n    },\n    hideModal () {\n      this.modal.hide()\n    }\n  },\n  mounted () {\n    this.modal = new Modal(this.$refs.modal)\n  }\n}\n</script>\n","import { render } from \"./RemoveItemModal.vue?vue&type=template&id=3330811e\"\nimport script from \"./RemoveItemModal.vue?vue&type=script&lang=js\"\nexport * from \"./RemoveItemModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Cart.vue?vue&type=template&id=f3a687d2\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_21","_createVNode","_component_Loading","active","$data","isLoading","style","_hoisted_1","_hoisted_2","cartlength","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_5","_component_router_link","to","_hoisted_6","_hoisted_7","_hoisted_8","_Fragment","_renderList","cart","carts","item","key","id","_hoisted_9","src","product","imageUrl","alt","title","_hoisted_11","_hoisted_12","_toDisplayString","_hoisted_13","description","price","_hoisted_14","_hoisted_15","type","min","qty","$event","onChange","$options","updateCart","_hoisted_17","_hoisted_18","_hoisted_19","onClick","_withModifiers","openRemoveModal","_hoisted_23","_ctx","$filters","currency","total","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","placeholder","coupon_code","_cache","args","addCoupon","discont","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_normalizeClass","_hoisted_32","_hoisted_33","_hoisted_34","final_total","_hoisted_35","_hoisted_36","_component_RemoveItemModal","ref","cartItem","tempItem","onRemoveItem","removeItem","tabindex","$props","$emit","props","Object","data","modal","methods","showModal","this","show","hideModal","hide","mounted","Modal","$refs","__exports__","components","RemoveItemModal","watch","length","getCart","api","$http","get","then","res","console","log","product_id","put","removeItemModal","delete","coupon","code","post","success","created","render"],"sourceRoot":""}