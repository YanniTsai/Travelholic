"use strict";(self["webpackChunktravelholic"]=self["webpackChunktravelholic"]||[]).push([[93],{7937:function(t,a,e){e.r(a),e.d(a,{default:function(){return at}});var s=e(3396);function n(t,a,e,n,o,l){const r=(0,s.up)("Navbar"),i=(0,s.up)("router-view"),c=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s.Wm)(i),(0,s.Wm)(c)],64)}var o=e(7139),l=e(9242),r=e.p+"img/logo.f6a43114.png";const i={class:"container-fluid"},c=(0,s._)("a",{class:"navbar-brand",href:"#"},[(0,s._)("img",{src:r,width:"150",alt:"travelholic"})],-1),d=(0,s._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,s._)("span",{class:"navbar-toggler-icon"})],-1),u={class:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent"},f={class:"navbar-nav"},g=(0,s._)("li",{class:"nav-link"},"精彩文章",-1),v=(0,s._)("a",{class:"nav-link",href:"#","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},"我的最愛",-1),p={class:"dropdown"},h={key:0,class:"cart-num"},b={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},w={key:0,class:"d-flex flex-column justify-content-center align-items-center m-4"},m=(0,s._)("span",{class:"mb-2"},"購物車目前沒有商品！",-1),_=[m],y={key:1},x={class:"row border-bottom pb-2 m-2"},k=["src"],C={class:"col-6"},L={class:"fw-bold"},D={class:"orange-price"},S={class:"d-flex justify-content-between m-2 cart-menu-bottom"},z={class:"d-flex align-items-center"},W=(0,s._)("span",null,"總計：",-1),$={class:"price"},j={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},F=(0,s._)("div",{class:"offcanvas-header"},[(0,s._)("h5",{class:"offcanvas-title",id:"offcanvasRightLabel"},"我的最愛"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),R={class:"offcanvas-body"},U={class:"row"},Y=["src"],H={class:"col-6 d-flex flex-column justify-content-start"},T={class:"fw-bold"},M={class:"fav-description"};function N(t,a,e,n,r,m){const N=(0,s.up)("Loading"),O=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(N,{active:r.isLoading,style:{"z-index":"9999"}},null,8,["active"]),(0,s._)("nav",{class:(0,o.C_)(["navbar navbar-expand-lg front-navbar",{"navbar-yellow":r.isScrolled}])},[(0,s._)("div",i,[c,d,(0,s._)("div",u,[(0,s._)("ul",f,[(0,s.Wm)(O,{to:"/products",class:"nav-link"},{default:(0,s.w5)((()=>[(0,s.Uk)("探索行程")])),_:1}),g,v,(0,s._)("div",p,[(0,s._)("a",{class:"dropdown-toggle nav-link dropdown-title",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false","data-bs-offset":"-100,0",onClick:a[0]||(a[0]=(0,l.iM)(((...t)=>m.getCart&&m.getCart(...t)),["prevent"]))},[(0,s.Uk)(" 購物車 "),r.cartlength?((0,s.wg)(),(0,s.iD)("div",h,(0,o.zw)(r.cartlength),1)):(0,s.kq)("",!0)]),(0,s._)("div",b,[0===r.cartlength?((0,s.wg)(),(0,s.iD)("div",w,_)):((0,s.wg)(),(0,s.iD)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.cart.carts,((a,e)=>((0,s.wg)(),(0,s.iD)("ul",{class:"list-unstyled",key:e},[(0,s.Wm)(O,{to:`/products/${a.product.id}`,class:"text-muted text-decoration-none"},{default:(0,s.w5)((()=>[(0,s._)("li",x,[(0,s._)("img",{src:a.product.imageUrl,alt:"商品圖片",class:"col-6"},null,8,k),(0,s._)("table",C,[(0,s._)("tr",L,(0,o.zw)(a.product.title),1),(0,s._)("tr",null,(0,o.zw)(a.qty)+" "+(0,o.zw)(a.product.unit),1),(0,s._)("tr",D,(0,o.zw)(t.$filters.currency(a.total))+" 元",1)])])])),_:2},1032,["to"])])))),128)),(0,s._)("div",S,[(0,s._)("div",z,[W,(0,s._)("span",$,(0,o.zw)(t.$filters.currency(r.cart.total))+" 元",1)]),(0,s._)("button",{class:"btn yellow-btn",onClick:a[1]||(a[1]=(0,l.iM)(((...t)=>m.goToCart&&m.goToCart(...t)),["prevent"]))},"查看購物車")])]))])])])])])],2),(0,s._)("div",j,[F,(0,s._)("div",R,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.favList,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"fav-item border-bottom p-3",key:t.id},[(0,s.Wm)(O,{to:`/products/${t.id}`,class:"text-muted text-decoration-none"},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s._)("img",{src:t.imageUrl,alt:"商品圖片",class:"col-6"},null,8,Y),(0,s._)("table",H,[(0,s._)("tr",T,(0,o.zw)(t.title),1),(0,s._)("tr",M,(0,o.zw)(t.description),1)])])])),_:2},1032,["to"])])))),128))])])],64)}e(7658);var O={data(){return{products:[],favList:[],cart:{},cartlength:0,isLoading:!1,isScrolled:!1}},inject:["emitter"],watch:{cart(){this.cartlength=this.cart.carts.length}},methods:{getProducts(){return new Promise(((t,a)=>{this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/yanni-hexschool-api/products/all";this.$http.get(e).then((e=>{if(this.isLoading=!1,e.data.success)this.products=e.data.products,t();else{const t=new Error("取得產品失敗");a(t)}}))}))},getFav(){const t=JSON.parse(localStorage.getItem("favoriteItem"))||[];this.favList=this.products.filter((a=>t.indexOf(a.id)>-1))},getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/yanni-hexschool-api/cart";this.$http.get(t).then((t=>{this.isLoading=!1,console.log(t.data),this.cart=t.data.data}))},goToCart(){this.$router.push("/cart")},detectScrolled(){window.addEventListener("scroll",(()=>{window.scrollY>=58.2?this.isScrolled=!0:this.isScrolled=!1}))}},mounted(){this.getCart(),this.getProducts().then((()=>{this.getFav()})),this.detectScrolled(),this.emitter.on("get-favlist",(()=>{this.getFav()}))}},P=e(89);const Z=(0,P.Z)(O,[["render",N]]);var q=Z;const E={class:"container-fluid bg-dark text-light footer d-flex justify-content-center align-items-center"},I=(0,s._)("i",{class:"bi bi-c-circle"},null,-1);function K(t,a){return(0,s.wg)(),(0,s.iD)("div",E,[I,(0,s.Uk)("  2023 | 僅作為練習使用，無任何商業用途。 ")])}const J={},A=(0,P.Z)(J,[["render",K]]);var B=A;function G(t){return{all:t=t||new Map,on:function(a,e){var s=t.get(a);s?s.push(e):t.set(a,[e])},off:function(a,e){var s=t.get(a);s&&(e?s.splice(s.indexOf(e)>>>0,1):t.set(a,[]))},emit:function(a,e){var s=t.get(a);s&&s.slice().map((function(t){t(e)})),(s=t.get("*"))&&s.slice().map((function(t){t(a,e)}))}}}const Q=G();var V=Q,X={components:{Navbar:q,Footer:B},provide(){return{emitter:V}}};const tt=(0,P.Z)(X,[["render",n]]);var at=tt}}]);
//# sourceMappingURL=93.506f3af0.js.map